<?xml version="1.0"?>
<odoo>

    <!-- Real Estate Receiver Action -->
    <record id="is_cd_connector_cod_report_action" model="ir.actions.act_window">
        <field name="name">Cod Report</field>
        <field name="res_model">cod.report</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="action_cod_list_by_report_list" model="ir.actions.act_window">
        <field name="name">Cod</field>
        <field name="res_model">cod</field>
        <field name="view_mode">tree</field>
        <field name="domain">[('report_id', '=', active_id)]</field>
        <field name="context">{'tree_view_edit': True}</field> <!-- Make the list view editable -->
    </record>

    <record id="view_cod_report_tree" model="ir.ui.view">
        <field name="name">cod.report.tree</field>
        <field name="model">cod</field>
        <field name="arch" type="xml">
            <tree 
                editable='top'
                decoration-danger="status == 'Invalid'"
            >

                <field name="name" readonly="invoice_id"/>
                <field name="report_id" readonly="invoice_id"/>
                <field name="delivery_date" readonly="invoice_id"/>
                <field name="tracking_id" readonly="invoice_id"/>
                <field name="receive_state" readonly="invoice_id"/>
                <field name="customer_name" readonly="invoice_id"/>
                <field name="customer_contact" readonly="invoice_id"/>
                <field name="customer_address" readonly="invoice_id"/>
                <field name="customer_postcode" readonly="invoice_id"/>
                <field name="granular_status" readonly="invoice_id"/>
                <field name="shipper_name" readonly="invoice_id"/>
                <field name="cod_amount" readonly="invoice_id"/>
                <field name="cod_fee" readonly="invoice_id"/>
                <field name="status" readonly="True"/>
                <field name="invoice_id" readonly="True"/>
            </tree>
        </field>
    </record>


    <record id="view_cod_report_search" model="ir.ui.view">
        <field name="name">cod.report.search</field>
        <field name="model">cod</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <!-- <field name="report_id" /> -->
                <field name="delivery_date" />
                <field name="tracking_id" />
                <field name="receive_state" />
                <field name="customer_name" />
                <field name="customer_contact" />
                <field name="customer_address" />
                <field name="customer_postcode" />
                <field name="granular_status" />
                <field name="shipper_name" />
                <field name="cod_amount" />
                <field name="cod_fee" />
                <field name="status" />
            </search>
        </field>
    </record>

    <record id="view_cod_report_form" model="ir.ui.view">
        <field name="name">cod.report.form</field>
        <field name="model">cod.report</field>
        <field name="arch" type="xml">
            <form string="COD Report">
                <header>

                    <field name="invoice_generated" invisible='True' />
                    <field name="is_invalid" invisible='True' />
                    <!-- Add a button to call the action_generate_invoices method -->
                        <button 
                            name="action_generate_invoices" 
                            type="object" 
                            string="Generate Invoices" 
                            invisible='invoice_generated or is_invalid'
                            class='btn btn-primary'
                        />
                        <button 
                            name="action_generate_invoices" 
                            type="object" 
                            string="Generate Invoices" 
                            class="disabled"
                            invisible='not is_invalid'
                        />
                    

                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="%(action_cod_list_by_report_list)d" type="action"
                                string="Afficher les encaissements"
                                icon="fa-money"
                                class="oe_highlight"
                                context="{'default_subscribe_id': active_id or False }">
                                    <!-- <field name="button_label" /> -->
                                    COD LIST
                        </button>
                    </div>
                    <group>
                        <field name="name"/>
                        <field name="file" filename='file_name'/>
                        <field name="file_name" invisible="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

</odoo>
